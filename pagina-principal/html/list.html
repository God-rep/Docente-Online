<button
  class="btn btn-primary"
  type="button"
  data-bs-toggle="offcanvas"
  data-bs-target="#offcanvasList"
>
  Acesse a lista de Disciplinas
</button>

<div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasList">
  <div class="offcanvas-header">
    <h5 class="offcanvas-title text-uerj-amarelo">Lista de Disciplinas</h5>
    <button
      type="button"
      class="btn-close"
      data-bs-dismiss="offcanvas"
    ></button>
  </div>
  <div class="offcanvas-body">
    <div
      class="d-flex flex-column align-items-stretch flex-shrink-0 bg-body-tertiary"
      style="width: 380px"
    >
      <script>
        const clicaNovaTurma = new CustomEvent("clicaNovaTurma");

        // Referencia a lista de disciplinas
        const container = document.querySelector('.list-group.list-group-flush.border-bottom.scrollarea');


        //Tira "?" do final do pathname, para facilitar comparacao
        function ajeitaPath(path) {
          return path.replace(/\?$/, "").replace(/\/$/, "");
        }

      //Ao clicar
      container.addEventListener('click', function(evento) {
        //Se clicou em algum elemento da lista de disciplinas e nao em nenhum ementario
        if ((evento.target.closest('.list-group-item.list-group-item-action.py-3.lh-sm'))
           && !(evento.target.matches('.text-uerj-laranja'))){
          let elementoClicado = evento.target.closest('.list-group-item.list-group-item-action.py-3.lh-sm');
          let textoBotao = elementoClicado.textContent;

          //Pega URL da página, tentando deduzir qual html esta aberto no momento
          const paginaAtual = ajeitaPath(window.location.pathname);

          //Salva a turma selecionada no localStorage, para carregar depois no outro script
          localStorage.setItem("turmaAtualInfo", textoBotao);
    
          //Se a pagina de registro de notas nao for a atual, vai ate a pagina de registro de notas
          if(paginaAtual !== "/Docente-Online/registro-de-notas-e-faltas/index.html"){
            window.location.href = "/Docente-Online/registro-de-notas-e-faltas/index.html"
          }
          //Se a pagina atual ja e a de registro de notas, somente avisa que a turma deve ser alterada 
          else{
            //Envia a turma selecionada pro DOM como evento, atualizando na propria pagina.
            document.dispatchEvent(clicaNovaTurma);
          }
        }
    });
      </script>
      <div class="list-group list-group-flush border-bottom scrollarea">
        <!-- Item 1 -->
        <div class="list-group-item list-group-item-action py-3 lh-sm">
          <div>
            <a class="text-uerj-amarelo link-primary link-underline-opacity-0" href="#">
              <div
                class="d-flex w-100 align-items-center justify-content-between"
              >
                <strong class="mb-1 text-uerj-amarelo">IME04-10833</strong>
                <div class="d-flex flex-column text-uerj-amarelo">
                  <small class="text-body-secondary">Ter M1 M2</small>
                  <small class="text-body-secondary">Qui M1 M2</small>
                </div>
              </div>
              <div class="col-10 mb-1 small text-uerj-amarelo">
                Análise e Projeto de Sistemas - Turma 1
              </div>
            </a>
          </div>
          <div class="col-10 mb-1 small text-uerj-amarelo">
            <a
              class="text-uerj-laranja"
              href="https://www.ementario.uerj.br/ementa.php?cdg_disciplina=10833"
              target="_blank"
              >Ementário</a
            >
          </div>
        </div>

        <!-- Item 2 -->
        <div class="list-group-item list-group-item-action py-3 lh-sm">
          <div>
            <a class="text-uerj-amarelo link-primary link-underline-opacity-0"" href="#">
              <div
                class="d-flex w-100 align-items-center justify-content-between"
              >
                <strong class="mb-1 text-uerj-amarelo">IME04-10832</strong>
                <div class="d-flex flex-column text-uerj-amarelo">
                  <small class="text-body-secondary">Qua M3 M4</small>
                  <small class="text-body-secondary">Sex M5 M6</small>
                </div>
              </div>
              <div class="col-10 mb-1 small text-uerj-amarelo">
                Banco de Dados I - Turma 2
              </div>
            </a>
          </div>
          <div class="col-10 mb-1 small text-uerj-amarelo">
            <a
              class="text-uerj-laranja"
              href="https://www.ementario.uerj.br/ementa.php?cdg_disciplina=10832"
              target="_blank"
              >Ementário</a
            >
          </div>
        </div>

        <!-- Espaço para adicionar mais disciplinas -->
      </div>
    </div>
  </div>
</div>
